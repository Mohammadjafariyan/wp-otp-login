{"version":3,"file":"view.js","mappings":"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","sources":["webpack://mjkh-otp-login/external window \"React\"","webpack://mjkh-otp-login/external window [\"wp\",\"apiFetch\"]","webpack://mjkh-otp-login/external window [\"wp\",\"i18n\"]","webpack://mjkh-otp-login/webpack/bootstrap","webpack://mjkh-otp-login/webpack/runtime/compat get default export","webpack://mjkh-otp-login/webpack/runtime/define property getters","webpack://mjkh-otp-login/webpack/runtime/hasOwnProperty shorthand","webpack://mjkh-otp-login/webpack/runtime/make namespace object","webpack://mjkh-otp-login/./src/view.js"],"sourcesContent":["module.exports = window[\"React\"];","module.exports = window[\"wp\"][\"apiFetch\"];","module.exports = window[\"wp\"][\"i18n\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/**\n * Use this file for JavaScript code that you want to run in the front-end\n * on posts/pages that contain this block.\n *\n * When this file is defined as the value of the `viewScript` property\n * in `block.json` it will be enqueued on the front end of the site.\n *\n * Example:\n *\n * ```js\n * {\n *   \"viewScript\": \"file:./view.js\"\n * }\n * ```\n *\n * If you're not making any changes to this file because your project doesn't need any\n * JavaScript running in the front-end, then you should delete this file and remove\n * the `viewScript` property from `block.json`.\n *\n * @see https://developer.wordpress.org/block-editor/reference-guides/block-api/block-metadata/#view-script\n */\nimport apiFetch from '@wordpress/api-fetch'\nimport {useState} from 'react'\nimport {__} from '@wordpress/i18n'\n\n/*\n* description:\n* step 1 : there are two forms , request otp , login\n* bind everything\n* step 2 : fill text request otp - requestOtpApiCall\n* step 3 : start timer - setTime\n* step 4 : resend code - requestCodeEventListener\n* step 5 : restart timer - startRestartTimer\n* step 6 : fill otp and login - verifyOtpAndLoginApiCall\n*\n* */\n\nlet emailOrMobile\nlet otp\nlet error\n\nconst CONFIG_totalSeconds = 150;\nvar totalSeconds = CONFIG_totalSeconds;\nvar intervalId;\n\n\n/*--------------------------------------------------------------------------*/\nconst isEmail = value => {\n\tconst emailRegex = /^[\\w.%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,}$/\n\treturn emailRegex.test(value)\n}\n\nconst startRestartTimer = ()=>{\n\t/*step 2: start timer*/\n\tintervalId = setInterval(setTime, 1000)\n}\n\nconst isMobile = value => {\n\tconst isMobileRegex = /^0((?:90|91|92|93|99)[0-9]{8})$/\n\treturn isMobileRegex.test(value)\n}\nconst setTime = function () {\n\n\t--totalSeconds;\n\tjQuery('#mjkh_seconds').text(pad(totalSeconds % 60));\n\tjQuery('#mjkh_minutes').text(pad(parseInt(totalSeconds / 60)));\n\n\tif (totalSeconds <= 0) {\n\t\tclearInterval(intervalId);\n\t\ttotalSeconds = CONFIG_totalSeconds;\n\n\t\tjQuery('.mjkh_timeout').hide()\n\t\tjQuery('#mjkh_resend').show()\n\n\n\t\tjQuery('#mjkh_minutes').text(\"02\")\n\t\tjQuery('#mjkh_seconds').text(\"30\")\n\t}\n}\nfunction pad(val) {\n\tvar valString = val + \"\";\n\tif (valString.length < 2) {\n\t\treturn \"0\" + valString;\n\t} else {\n\t\treturn valString;\n\t}\n}\n\nconst showTimerAndResend = ()=>{\n\t/* show timer and hide resend */\n\tjQuery('.mjkh_timeout').show()\n\tjQuery('#mjkh_resend').hide()\n}\n\n\n/*--------------------------------------------------------------------------*/\n/*step 1 : request otp */\nconst requestOtpApiCall = async callback => {\n\n\t/*prevent request again while counting time*/\n\tif (totalSeconds < CONFIG_totalSeconds && totalSeconds > 0) {\n\t\treturn;\n\t}\n\n\n\n\t/*request otp api call*/\n\tapiFetch({\n\t\tpath: '/wp/v2/users/sendotp', // This would require a custom REST API endpoint or AJAX handler\n\t\tmethod: 'POST',\n\t\tdata: {\n\t\t\t// mobile and email\n\t\t\temail: isEmail(emailOrMobile) ? emailOrMobile : null,\n\t\t\tmobile: isMobile(emailOrMobile) ? emailOrMobile : null\n\t\t}\n\t})\n\t\t.then(response => {\n\n\t\t\t/*step 1b : request otp response */\n\n\t\t\t/* disable button to prevent several requests*/\n\t\t\tjQuery('#mjkh-otp-request-code')\n\t\t\t\t.find('input[type=\"submit\"]')\n\t\t\t\t.removeAttr('disabled')\n\n\t\t\t/* successfull */\n\t\t\tif (response.success) {\n\n\n\t\t\t\t/* if debug is enabled then calling will have content*/\n\t\t\t\tif (response.content) {\n\t\t\t\t\tjQuery(' #nds_form_feedback ').html(\n\t\t\t\t\t\t'<h2>otp request successful</h2><br>' +\n\t\t\t\t\t\tresponse.code +\n\t\t\t\t\t\t'<br/>' +\n\t\t\t\t\t\t'<h2>content</h2><br>' +\n\t\t\t\t\t\tresponse.content +\n\t\t\t\t\t\t'<br/>' +\n\t\t\t\t\t\t'<h2>sms</h2><br>' +\n\t\t\t\t\t\tresponse.sms +\n\t\t\t\t\t\t'<br/>'\n\t\t\t\t\t)\n\n\n\t\t\t\t} else {\n\t\t\t\t\tjQuery(' #nds_form_feedback ').html('<p>' + response.message + '</p>')\n\t\t\t\t}\n\n\n\t\t\t\t/* show timer and hide resend */\n\t\t\t\tshowTimerAndResend();\n\n\t\t\t\t/*step 2: start timer*/\n\t\t\t\tstartRestartTimer()\n\n\t\t\t\t/*step 1c: show and hide staff */\n\t\t\t\tcallback()\n\t\t\t} else {\n\t\t\t\terror = response.message || 'otp request failed'\n\t\t\t}\n\t\t})\n\t\t.catch(err => {\n\t\t\tjQuery('#mjkh-otp-request-code')\n\t\t\t\t.find('input[type=\"submit\"]')\n\t\t\t\t.removeAttr('disabled')\n\n\t\t\tjQuery(' #nds_form_feedback ').html(\n\t\t\t\t\"<p style='color:red'>\" + err.message + '</p><br>'\n\t\t\t)\n\t\t\terror = 'An error occurred during login'\n\t\t\tconsole.error(err)\n\t\t})\n}\n\n/*--------------------------------------------------------------------------*/\n/*step 3 : verify otp and Login */\nconst verifyOtpAndLoginApiCall = async () => {\n\tapiFetch({\n\t\tpath: '/wp/v2/users/login', // This would require a custom REST API endpoint or AJAX handler\n\t\tmethod: 'POST',\n\t\tdata: {\n\t\t\temail: isEmail(emailOrMobile) ? emailOrMobile : null,\n\t\t\tmobile: isMobile(emailOrMobile) ? emailOrMobile : null,\n\t\t\tcode: otp\n\t\t},\n\t\txhrFields: {\n\t\t\twithCredentials: true // Ensure cookies are included in cross-origin requests\n\t\t}\n\t})\n\t\t.then(response => {\n\n\t\t\t/*un necessary*/\n\t\t\tjQuery('#mjkh-otp-login')\n\t\t\t\t.find('input[type=\"submit\"]')\n\t\t\t\t.removeAttr('disabled')\n\n\t\t\t// Handle successful login\n\t\t\tif (response.success) {\n\n\t\t\t\t/*step 3b: show to user and reload*/\n\t\t\t\tjQuery('#mjkh-otp-login').html('<p>' + response.message + '</p>')\n\n\t\t\t\twindow.location.reload()\n\t\t\t} else {\n\t\t\t\terror = response.message || 'Login failed'\n\t\t\t}\n\t\t})\n\t\t.catch(err => {\n\t\t\tjQuery('#mjkh-otp-login')\n\t\t\t\t.find('input[type=\"submit\"]')\n\t\t\t\t.removeAttr('disabled')\n\t\t\terror = 'An error occurred during login'\n\n\t\t\tjQuery(' #nds_form_feedback ').html(\n\t\t\t\t\"<p style='color:red'>\" + err.message + '</p><br>'\n\t\t\t)\n\t\t\t//jQuery(' #nds_form_feedback ').append('<p>Something went wrong.</p><br>')\n\n\t\t\tconsole.error(err)\n\t\t})\n}\n\n\nfunction hideResendOtp() {\n\t/*hide\n\t\t\t* ارسال مجدد رمز یکبار مصرف\n\t\t\t* as soon as it clicked\n\t\t\t */\n\tjQuery('#mjkh_resend').hide()\n}\n\n/*step 0 : config everything*/\ndocument.addEventListener('DOMContentLoaded', () => {\n\tjQuery(document).ready(function () {\n\t\t'use strict'\n\n\n\t\t/*step 1a: bind request otp*/\n\t\tconst requestCodeEventListener = async function (event) {\n\t\t\tevent.preventDefault() // Prevent the default form submit.\n\n\n\t\t\temailOrMobile = jQuery('#mjkh-otp-request-code')\n\t\t\t\t.find('[name=\"emailOrMobile\"]')\n\t\t\t\t.val()\n\n\t\t\tjQuery('#nds_form_feedback').text('')\n\n\t\t\tif (!emailOrMobile) {\n\t\t\t\tjQuery('#nds_form_feedback').text(\n\t\t\t\t\t__('Please Enter A Valid Email Or Mobile', 'mjkh-otp')\n\t\t\t\t)\n\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\t/*hide\n\t\t\t* ارسال مجدد رمز یکبار مصرف\n\t\t\t* as soon as it clicked\n\t\t\t */\n\t\t\thideResendOtp()\n\n\n\t\t\tjQuery('#mjkh-otp-request-code')\n\t\t\t\t.find('input[type=\"submit\"]')\n\t\t\t\t.attr('disabled', true)\n\t\t\tawait requestOtpApiCall(() => {\n\t\t\t\tjQuery('#mjkh-otp-request-code').hide()\n\t\t\t\tjQuery('#mjkh-otp-login').show()\n\t\t\t})\n\t\t}\n\n\n\t\t/* step 1a: bind request otp*/\n\t\tjQuery('#mjkh-otp-request-code').submit(requestCodeEventListener)\n\t\tjQuery('#mjkh_resend').click(requestCodeEventListener)\n\n\n\t\t/*step 3a: bind verify otp and login*/\n\t\tjQuery('#mjkh-otp-login').submit(async function (event) {\n\t\t\tevent.preventDefault() // Prevent the default form submit.\n\n\n\t\t\totp = jQuery('#mjkh-otp-login').find('[name=\"otp\"]').val()\n\n\t\t\tjQuery('#nds_form_feedback').text('')\n\n\t\t\tif (!otp) {\n\t\t\t\tjQuery('#nds_form_feedback').text(\n\t\t\t\t\t__('Please Enter A Valid Code', 'mjkh-otp')\n\t\t\t\t)\n\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tjQuery('#mjkh-otp-login')\n\t\t\t\t.find('input[type=\"submit\"]')\n\t\t\t\t.attr('disabled', true)\n\n\t\t\tawait verifyOtpAndLoginApiCall()\n\t\t})\n\t})\n})\n"],"names":["apiFetch","useState","__","emailOrMobile","otp","error","CONFIG_totalSeconds","totalSeconds","intervalId","isEmail","value","emailRegex","test","startRestartTimer","setInterval","setTime","isMobile","isMobileRegex","jQuery","text","pad","parseInt","clearInterval","hide","show","val","valString","length","showTimerAndResend","requestOtpApiCall","callback","path","method","data","email","mobile","then","response","find","removeAttr","success","content","html","code","sms","message","catch","err","console","verifyOtpAndLoginApiCall","xhrFields","withCredentials","window","location","reload","hideResendOtp","document","addEventListener","ready","requestCodeEventListener","event","preventDefault","attr","submit","click"],"sourceRoot":""}