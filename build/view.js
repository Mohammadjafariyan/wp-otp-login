(()=>{"use strict";var e={n:t=>{var r=t&&t.__esModule?()=>t.default:()=>t;return e.d(r,{a:r}),r},d:(t,r)=>{for(var o in r)e.o(r,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:r[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.wp.apiFetch;var r=e.n(t);window.React;const o=window.wp.i18n;let n,s,d;var u,i=150;const a=e=>/^[\w.%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}$/.test(e),m=e=>/^0((?:90|91|92|93|99)[0-9]{8})$/.test(e),l=function(){--i,jQuery("#mjkh_seconds").text(c(i%60)),jQuery("#mjkh_minutes").text(c(parseInt(i/60))),i<=0&&(clearInterval(u),i=150,jQuery(".mjkh_timeout").hide(),jQuery("#mjkh_resend").show(),jQuery("#mjkh_minutes").text("02"),jQuery("#mjkh_seconds").text("30"))};function c(e){var t=e+"";return t.length<2?"0"+t:t}document.addEventListener("DOMContentLoaded",(()=>{jQuery(document).ready((function(){const e=async function(e){e.preventDefault(),n=jQuery("#mjkh-otp-request-code").find('[name="emailOrMobile"]').val(),jQuery("#nds_form_feedback").text(""),n?(jQuery("#mjkh_resend").hide(),jQuery("#mjkh-otp-request-code").find('input[type="submit"]').attr("disabled",!0),await(async e=>{i<150&&i>0||r()({path:"/wp/v2/users/sendotp",method:"POST",data:{email:a(n)?n:null,mobile:m(n)?n:null}}).then((t=>{jQuery("#mjkh-otp-request-code").find('input[type="submit"]').removeAttr("disabled"),t.success?(t.content?jQuery(" #nds_form_feedback ").html("<h2>otp request successful</h2><br>"+t.code+"<br/><h2>content</h2><br>"+t.content+"<br/><h2>sms</h2><br>"+t.sms+"<br/>"):jQuery(" #nds_form_feedback ").html("<p>"+t.message+"</p>"),jQuery(".mjkh_timeout").show(),jQuery("#mjkh_resend").hide(),u=setInterval(l,1e3),e()):d=t.message||"otp request failed"})).catch((e=>{jQuery("#mjkh-otp-request-code").find('input[type="submit"]').removeAttr("disabled"),jQuery(" #nds_form_feedback ").html("<p style='color:red'>"+e.message+"</p><br>"),d="An error occurred during login",console.error(e)}))})((()=>{jQuery("#mjkh-otp-request-code").hide(),jQuery("#mjkh-otp-login").show()}))):jQuery("#nds_form_feedback").text((0,o.__)("Please Enter A Valid Email Or Mobile","mjkh-otp"))};jQuery("#mjkh-otp-request-code").submit(e),jQuery("#mjkh_resend").click(e),jQuery("#mjkh-otp-login").submit((async function(e){e.preventDefault(),s=jQuery("#mjkh-otp-login").find('[name="otp"]').val(),jQuery("#nds_form_feedback").text(""),s?(jQuery("#mjkh-otp-login").find('input[type="submit"]').attr("disabled",!0),await(async()=>{r()({path:"/wp/v2/users/login",method:"POST",data:{email:a(n)?n:null,mobile:m(n)?n:null,code:s},xhrFields:{withCredentials:!0}}).then((e=>{jQuery("#mjkh-otp-login").find('input[type="submit"]').removeAttr("disabled"),e.success?(jQuery("#mjkh-otp-login").html("<p>"+e.message+"</p>"),window.location.reload()):d=e.message||"Login failed"})).catch((e=>{jQuery("#mjkh-otp-login").find('input[type="submit"]').removeAttr("disabled"),d="An error occurred during login",jQuery(" #nds_form_feedback ").html("<p style='color:red'>"+e.message+"</p><br>"),console.error(e)}))})()):jQuery("#nds_form_feedback").text((0,o.__)("Please Enter A Valid Code","mjkh-otp"))}))}))}))})();